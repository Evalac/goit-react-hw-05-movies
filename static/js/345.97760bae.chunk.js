"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[345],{345:function(e,t,i){i.r(t),i.d(t,{default:function(){return N}});var s=i(861),n=i(439),a=i(757),r=i.n(a),c="Pages_backLink__m2oQZ",l=i(65),o=i(791),d=i(318),_=i(344),u=i(606),m=i(433),h={movie_deatils_card:"MovieDetailsCard_movie_deatils_card__FnOJb",card_content_items:"MovieDetailsCard_card_content_items__dMF1U",img_poster:"MovieDetailsCard_img_poster__iGVNU",card_list_item:"MovieDetailsCard_card_list_item__zlY4C",card_geners_list:"MovieDetailsCard_card_geners_list__9k3Uw",additional_info_block:"MovieDetailsCard_additional_info_block__VYevi",card_geners_list_item:"MovieDetailsCard_card_geners_list_item__G6KYp",card_link:"MovieDetailsCard_card_link__AswU7",button_watchList:"MovieDetailsCard_button_watchList__jFtu9"},v=i(184);var f=function(e){var t,i=e.movieDetails,s=[],a=(0,o.useState)(null!==(t=JSON.parse(localStorage.getItem("watchlist")))&&void 0!==t?t:[]),r=(0,n.Z)(a,2),c=r[0],d=r[1],_=c.some((function(e){return e.id===i.id}));return(0,o.useEffect)((function(){localStorage.setItem("watchlist",JSON.stringify(c))}),[c]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("section",{className:h.movie_deatils_card,children:[(0,v.jsx)("div",{children:(0,v.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(i.poster_path),className:h.img_poster,alt:"..."})}),(0,v.jsxs)("div",{className:h.card_content_items,children:[(0,v.jsxs)("ul",{className:h.card_list,children:[(0,v.jsxs)("li",{className:h.card_list_item,children:[(0,v.jsx)("h2",{className:h.title,children:i.title}),(0,v.jsx)("p",{children:i.overview})]}),(0,v.jsx)("li",{children:(0,v.jsxs)("p",{children:[" Release: ",i.release_date]})}),(0,v.jsx)("li",{children:(0,v.jsxs)("p",{children:[" User score: ",i.vote_average]})}),(0,v.jsxs)("li",{children:["Runtime: ",i.runtime," min"]})]}),(0,v.jsx)("ul",{className:h.card_geners_list,children:(0,v.jsx)("li",{className:h.card_geners_list_item,children:(0,v.jsxs)("p",{children:["Genres:"," ",i.genres.map((function(e){return e.name})).join(", "),"."]})})}),(0,v.jsxs)("div",{className:h.additional_info_block,children:[(0,v.jsx)("p",{children:"Additional information:"}),(0,v.jsx)(l.rU,{to:"cast",className:h.card_link,children:"Cast"}),(0,v.jsx)(l.rU,{to:"reviews",className:h.card_link,children:"Reviews"}),(0,v.jsx)("button",{className:h.button_watchList,onClick:function(){_?alert("\u0422\u0430\u043a\u0438\u0439 \u0444\u0456\u043b\u044c\u043c \u0432\u0436\u0435 \u0454 \u0432 \u0441\u043f\u0438\u0441\u043a\u0443"):(s.push(i),d((function(e){return[].concat((0,m.Z)(e),s)})))},disabled:_,children:"Add to watchlist"}),(0,v.jsx)("button",{className:h.button_watchList,onClick:function(){console.log("click");var e=c.filter((function(e){return e.id!==i.id}));d(e),localStorage.setItem("watchlist",JSON.stringify(e))},disabled:!_,children:"Remove"})]})]})]})})},j="idle",p="pending",x="resolved",g="rejected";var N=function(){var e,t,i=(0,o.useState)(j),a=(0,n.Z)(i,2),m=a[0],h=a[1],N=(0,o.useState)([]),k=(0,n.Z)(N,2),w=k[0],b=k[1],C=(0,o.useState)(null),I=(0,n.Z)(C,2),M=I[0],D=I[1],Z=(0,l.UO)(),J=(0,l.TH)(),O=(0,o.useRef)(null!==(e=null===(t=J.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/");function S(){return(S=(0,s.Z)(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Z.movieId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,console.log("\u0412\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f \u0444\u0435\u0442\u0447 \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0456 movieDetails"),e.next=6,fetch("".concat(d._,"/movie/").concat(Z.movieId,"?language=en-US"),d.Y);case 6:return t=e.sent,e.next=9,t.json();case 9:return i=e.sent,e.abrupt("return",i);case 13:throw e.prev=13,e.t0=e.catch(2),new Error("\u0423\u043f\u0441, \u0449\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e\u0442 \u043d\u0435 \u0442\u0430\u043a...");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){h(p),function(){return S.apply(this,arguments)}().then((function(e){b(e),h(x)})).catch((function(e){D(e),h(g)}))}),[]),m===p?(0,v.jsx)(_.Z,{}):m===x?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.OL,{className:c,to:O.current,children:"Back to movie list"}),(0,v.jsx)(f,{movieDetails:w}),(0,v.jsx)(l.j3,{})]}):m===g?(0,v.jsx)(u.Z,{error:M}):void 0}},318:function(e,t,i){i.d(t,{Y:function(){return n},_:function(){return s}});var s="https://api.themoviedb.org/3",n={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkOWNhMTczNzkwZWQ5NzdkZGM3ZDgzYTA0NmQ3ZTIwMiIsIm5iZiI6MTczOTEyMTk4OS44NTIsInN1YiI6IjY3YThlNTQ1MDhkZmY5MDMxOGYxMTkwZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.K59AU-jgWUYBFO064D_SN_0Dl_uXHhDAAsm48CRTA0c"}}}}]);
//# sourceMappingURL=345.97760bae.chunk.js.map